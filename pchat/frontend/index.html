<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login</title>
</head>
<body>
  <h1>Login</h1>
  <input type="text" id="username" placeholder="Username" required />
  <button onclick="login()">Login</button>

 <script>
  function login() {
    const username = document.getElementById("username").value.trim();
    if (!username) {
      alert("Please enter a username.");
      return;
    }

    const formData = new FormData();
    formData.append("username", username);

    fetch('/login', {
  method: 'POST',
  body: formData
})
.then(response => response.json())
.then(data => {
  if (data.token) {
    localStorage.setItem("token", data.token);
    localStorage.setItem("username", username);

    // Redirect handled by frontend
    window.location.href = "chat.html";
  } else {
    throw new Error("No token received");
  }
})
.catch(err => {
  alert("Login failed.");
  console.error(err);
});

  }
</script>

</body>
</html>
